(this["webpackJsonpblog-frontend"]=this["webpackJsonpblog-frontend"]||[]).push([[0],{101:function(e,n){},108:function(e,n,t){"use strict";t.r(n);var r,a,o,c,i,s,u,b,l,j,d=t(1),O=t.n(d),p=t(31),g=t.n(p),f=(t(68),t(14)),m=t(3),h=t(34),x=t(4),v=t(5),y={gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"]},w=t(0),k=v.b.button(r||(r=Object(x.a)(["\n  border: none;\n  border-radius: 10px;\n  font-size: 1rem;\n  font-weight: bold;\n  padding: 0.25rem, 1rem;\n  color: white;\n  outline: none;\n  cursor: pointer;\n  background: ",";\n  &:hover {\n    background: ",";\n  }\n  &:disabled{\n    background: ",";\n    color: ",";\n    cursor: not-allowed;\n  }\n  ","\n  ","\n"])),y.gray[8],y.gray[5],y.gray[2],y.gray[5],(function(e){return e.fullWidth&&Object(v.a)(a||(a=Object(x.a)(["\n      padding-top: 0.75rem;\n      padding-bottom: 0.75rem;\n      width: 100%;\n      font-size: 1.125rem;\n    "])))}),(function(e){return e.cyan&&Object(v.a)(o||(o=Object(x.a)(["\n      background: ",";\n      &:hover {\n        background: ",";\n      }\n    "])),y.cyan[5],y.cyan[2])})),E=Object(f.e)((function(e){var n=e.to,t=e.history,r=Object(h.a)(e,["to","history"]);return Object(w.jsx)(k,Object(m.a)(Object(m.a)({},r),{},{onClick:function(e){n&&t.push(n),r.onClick&&r.onClick(e)}}))})),C=t(10),S=v.b.div(c||(c=Object(x.a)(["\n    padding-left: 1rem;\n    padding-right: 1rem;\n    width: 1024px;\n    margin: 0 auto;\n\n    @media (max-width: 1024px){\n        width: 768px;\n    }\n    @media (max-width: 768px){\n        width: 100%auto;\n    }\n"]))),I=function(e){var n=e.children,t=Object(h.a)(e,["children"]);return Object(w.jsx)(S,Object(m.a)(Object(m.a)({},t),{},{children:n}))},T=t(12),P=v.b.div(i||(i=Object(x.a)(["\n  opacity:0.7;\n  position: fixed;\n  width: 100%;\n  background: ",";\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5);\n"])),y.gray[3]),_=Object(v.b)(I)(s||(s=Object(x.a)(["\n  height: 4rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  .logo {\n    font-size: 1.7rem;\n    font-weight: 500;\n    letter-spacing: 2px;\n  }\n  .right {\n    display: flex;\n    align-items: center;\n  }\n"]))),D=v.b.div(u||(u=Object(x.a)(["\n  height: 4rem;\n"]))),L=v.b.div(b||(b=Object(x.a)(["\n  font-weight: 500;\n  font-size:1.5rem;\n  margin-right: 1rem;\n"]))),R=function(e){var n=e.user,t=e.onLogout;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P,{children:Object(w.jsxs)(_,{children:[Object(w.jsx)(T.b,{to:"/",className:"logo",children:"Diary With You"}),n?Object(w.jsxs)("div",{className:"right",children:[Object(w.jsx)(L,{children:n.username}),Object(w.jsx)(E,{onClick:t,children:"\ub85c\uadf8\uc544\uc6c3"})]}):Object(w.jsx)("div",{className:"right",children:Object(w.jsx)(E,{to:"/login",children:"\ub85c\uadf8\uc778"})})]})}),Object(w.jsx)(D,{})]})},F=t(7),N=t(11),z=t.n(N),A=t(15),M=t(110),B=t(109),G=t(13),U=t(57),W=t.n(U).a.create(),H=function(){return W.post("/api/auth/logout")},q="loading/START_LOADING",J="loading/FINISH_LOADING",K=Object(M.a)(q,(function(e){return e})),Q=Object(M.a)(J,(function(e){return e})),Y=Object(B.a)((l={},Object(F.a)(l,q,(function(e,n){return Object(m.a)(Object(m.a)({},e),{},Object(F.a)({},n.payload,!0))})),Object(F.a)(l,J,(function(e,n){return Object(m.a)(Object(m.a)({},e),{},Object(F.a)({},n.payload,!1))})),l),{}),Z=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function $(e,n){var t="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return z.a.mark((function a(o){var c;return z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(G.c)(K(e));case 2:return a.prev=2,a.next=5,Object(G.b)(n,o.payload);case 5:return c=a.sent,a.next=8,Object(G.c)({type:t,payload:c.data,meta:c});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,Object(G.c)({type:r,payload:a.t0,error:!0});case 14:return a.next=16,Object(G.c)(Q(e));case 16:case"end":return a.stop()}}),a,null,[[2,10]])}))}var V=z.a.mark(je),X=z.a.mark(de),ee="user/TEMP_SET_USER",ne=Z("user/CHECK"),te=Object(A.a)(ne,3),re=te[0],ae=te[1],oe=te[2],ce="user/LOGOUT",ie=Object(M.a)(ee,(function(e){return e})),se=Object(M.a)(re),ue=Object(M.a)(ce),be=$(re,(function(){return W.get("/api/auth/check")}));function le(){try{localStorage.removeItem("user")}catch(e){console.log("localStorage is not working")}}function je(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(G.b)(H);case 3:localStorage.removeItem("user"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),V,null,[[0,6]])}function de(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.d)(re,be);case 2:return e.next=4,Object(G.d)(oe,le);case 4:return e.next=6,Object(G.d)(ce,je);case 6:case"end":return e.stop()}}),X)}var Oe,pe,ge,fe,me,he,xe,ve=Object(B.a)((j={},Object(F.a)(j,ee,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{user:t})})),Object(F.a)(j,ae,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{user:t,checkError:null})})),Object(F.a)(j,oe,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{user:null,checkError:t})})),Object(F.a)(j,ce,(function(e){return Object(m.a)(Object(m.a)({},e),{},{user:null})})),j),{user:null,checkError:null}),ye=function(){var e=Object(C.c)((function(e){return{user:e.user.user}})).user,n=Object(C.b)();return console.log(e),Object(w.jsx)(R,{user:e,onLogout:function(){n(ue())}})},we=v.b.div(Oe||(Oe=Object(x.a)(["\n    ","\n    color: ",";\n    span+span:before{\n        color: ",";\n        padding-left: 0.25rem;\n        padding-right: 0.25rem;\n        content: '\\B7';\n    }\n"],["\n    ","\n    color: ",";\n    span+span:before{\n        color: ",";\n        padding-left: 0.25rem;\n        padding-right: 0.25rem;\n        content: '\\\\B7';\n    }\n"])),(function(e){return e.hasMarginTop&&Object(v.a)(pe||(pe=Object(x.a)(["\n        margin-top:1rem;"])))}),y.gray[6],y.gray[4]),ke=function(e){var n=e.username,t=e.publishedDate,r=e.hasMarginTop;return Object(w.jsxs)(we,{hasMarginTop:r,children:[Object(w.jsx)("span",{children:Object(w.jsx)("b",{children:Object(w.jsx)(T.b,{to:"/@".concat(n),children:n})})}),Object(w.jsx)("span",{children:new Date(t).toLocaleDateString()})]})},Ee=v.b.div(ge||(ge=Object(x.a)(["\n  margin-top: 0.5rem;\n  .tag {\n    display: inline-block;\n    color: ",";\n    text-decoration: none;\n    margin-right: 0.5rem;\n    &:hover {\n      color: ",";\n    }\n  }\n"])),y.cyan[7],y.cyan[6]),Ce=function(e){var n=e.tags;return Object(w.jsx)(Ee,{children:n.map((function(e){return Object(w.jsxs)(T.b,{className:"tag",to:"/?tag=".concat(e),children:["#",e]},e)}))})},Se=t.p+"static/media/0002.30684a44.jpg",Ie=Object(v.b)(I)(fe||(fe=Object(x.a)(["\n  margin-top: 1rem;\n  /* background-image: url(","); */\n\n  /* background-image: repeating-linear-gradient(green 20%); */\n"])),Se),Te=v.b.div(me||(me=Object(x.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 3rem;\n"]))),Pe=v.b.div(he||(he=Object(x.a)(["\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n  &:first-child {\n    padding-top: 0;\n  }\n  & + & {\n    border-top: 1px solid ",";\n  }\n  h2 {\n    font-size: 1.5rem;\n    margin-bottom: 0;\n    margin-top: 0;\n    &:hover {\n      color: ",";\n    }\n  }\n  p {\n    margin-top: 0.5rem;\n  }\n"])),y.gray[6],y.gray[6]),_e=function(e){var n=e.post,t=n.publishedDate,r=n.user,a=n.tags,o=n.title,c=n.body,i=n._id;return Object(w.jsxs)(Pe,{children:[Object(w.jsx)("h2",{children:Object(w.jsx)(T.b,{to:"/@".concat(r.username,"/").concat(i),children:o})}),Object(w.jsx)(ke,{username:r.username,publishedDate:new Date(t)}),Object(w.jsx)(Ce,{tags:a}),Object(w.jsx)("p",{children:c})]})},De=function(e){var n=e.posts,t=e.loading,r=e.error,a=e.showWriteButton;return r?Object(w.jsx)(Ie,{children:"\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."}):Object(w.jsxs)(Ie,{children:[Object(w.jsx)(Te,{children:a&&Object(w.jsx)(E,{cyan:!0,to:"/write",children:"\uc0c8\uae00 \uc791\uc131\ud558\uae30"})}),!t&&n&&Object(w.jsx)("div",{children:n.map((function(e){return Object(w.jsx)(_e,{post:e},e._id)}))})]})},Le=t(21),Re=t.n(Le),Fe=z.a.mark(We),Ne=Z("post/LIST_POSTS"),ze=Object(A.a)(Ne,3),Ae=ze[0],Me=ze[1],Be=ze[2],Ge=Object(M.a)(Ae,(function(e){return{tag:e.tag,username:e.username,page:e.page}})),Ue=$(Ae,(function(e){var n=e.page,t=e.username,r=e.tag,a=Re.a.stringify({page:n,username:t,tag:r});return W.get("api/posts?".concat(a))}));function We(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.d)(Ae,Ue);case 2:case"end":return e.stop()}}),Fe)}var He,qe,Je,Ke,Qe,Ye,Ze=Object(B.a)((xe={},Object(F.a)(xe,Me,(function(e,n){var t=n.payload,r=n.meta;return Object(m.a)(Object(m.a)({},e),{},{posts:t,lastPage:parseInt(r.headers["last-page"],10)})})),Object(F.a)(xe,Be,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{error:t})})),xe),{posts:null,error:null,lastPage:1}),$e=Object(f.e)((function(e){var n=e.location,t=e.match,r=Object(C.b)(),a=Object(C.c)((function(e){var n=e.posts,t=e.loading,r=e.user;return{posts:n.posts,error:n.error,loading:t["posts/LIST_POSTS"],user:r.user}})),o=a.posts,c=a.error,i=a.loading,s=a.user;return Object(d.useEffect)((function(){var e=t.params.username,a=Re.a.parse(n.search,{ignoreQueryPrefix:!0}),o=a.tag,c=a.page;r(Ge({tag:o,username:e,page:c}))}),[r,n.search]),Object(w.jsx)(De,{loading:i,error:c,posts:o,showWriteButton:s})})),Ve=v.b.div(He||(He=Object(x.a)(["\n    width: 320px;\n    margin: 0 auto;\n    display: flex;\n    margin-bottom: 5rem;\n    justify-content: space-between;\n"]))),Xe=v.b.div(qe||(qe=Object(x.a)([""]))),en=function(e){var n=e.username,t=e.tag,r=e.page,a=Re.a.stringify({tag:t,page:r});return n?"/@".concat(n,"?").concat(a):"/?".concat(a)},nn=function(e){var n=e.page,t=e.lastPage,r=e.username,a=e.tag;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(Ve,{children:[Object(w.jsx)(E,{disabled:1===n,to:1===n?void 0:en({username:r,tag:a,page:n-1}),children:"\uc774\uc804"}),Object(w.jsx)(Xe,{children:n}),Object(w.jsx)(E,{disabled:n===t,to:n===t?void 0:en({username:r,tag:a,page:n+1}),children:"\ub2e4\uc74c"})]}),Object(w.jsx)("p",{children:"Made by Kjm"})]})},tn=Object(f.e)((function(e){var n=e.location,t=e.match,r=Object(C.c)((function(e){var n=e.posts,t=e.loading;return{lastPage:n.lastPage,posts:n.posts,loading:t["posts/LIST_POSTS"]}})),a=r.lastPage,o=r.posts,c=r.loading;if(!o||c)return null;var i=t.params.username,s=Re.a.parse(n.search,{ignoreQueryPrefix:!0}),u=s.tag,b=s.page,l=void 0===b?1:b;return Object(w.jsx)(nn,{tag:u,username:i,page:parseInt(l,10),lastPage:a})})),rn=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(ye,{}),Object(w.jsx)($e,{}),Object(w.jsx)(tn,{})]})},an=Object(v.b)(I)(Je||(Je=Object(x.a)(["\n  margin-top: 4rem;\n"]))),on=v.b.div(Ke||(Ke=Object(x.a)(["\n  border-bottom: 1px solid ",";\n  padding-bottom: 3rem;\n  margin-bottom: 3rem;\n  h1 {\n    font-size: 3rem;\n    line-height: 1.5;\n    margin: 0;\n  }\n// "])),y.gray[2]),cn=v.b.div(Qe||(Qe=Object(x.a)(["\n  font-size: 1.3125rem;\n  color: ",";\n"])),y.gray[8]),sn=function(e){var n=e.post,t=e.error,r=e.loading,a=e.actionButtons;if(console.log(n),t)return t.response&&404===t.response.status?Object(w.jsx)(an,{children:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ud3ec\uc2a4\ud2b8\uc785\ub2c8\ub2e4."}):Object(w.jsx)(an,{children:"\uc624\ub958\ubc1c\uc0dd!"});if(r||!n)return console.log("post is not exist"),null;var o=n.title,c=n.body,i=n.user,s=n.publishedDate,u=n.tags;return Object(w.jsxs)(an,{children:[Object(w.jsxs)(on,{children:[Object(w.jsx)("h1",{children:o}),Object(w.jsx)(ke,{username:i.username,publishedDate:s,hasMarginTop:!0}),Object(w.jsx)(Ce,{tags:u})]}),a,Object(w.jsx)(cn,{dangerouslySetInnerHTML:{__html:c}})]})},un=t(58),bn=z.a.mark(xn),ln=Z("post/READ_POST"),jn=Object(A.a)(ln,3),dn=jn[0],On=jn[1],pn=jn[2],gn="post/UNLOAD_POST",fn=Object(M.a)(dn,(function(e){return e})),mn=Object(M.a)(gn),hn=$(dn,(function(e){return W.get("/api/posts/".concat(e))}));function xn(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.d)(dn,hn);case 2:case"end":return e.stop()}}),bn)}var vn,yn,wn,kn,En,Cn,Sn={post:null,error:null},In=Object(B.a)((Ye={},Object(F.a)(Ye,On,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{post:t})})),Object(F.a)(Ye,pn,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{error:t})})),Object(F.a)(Ye,gn,(function(){return Sn})),Ye),Sn),Tn=v.b.div(vn||(vn=Object(x.a)(["\n    position: fixed;\n    z-index: 30;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0,0,0,0.25);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]))),Pn=v.b.div(yn||(yn=Object(x.a)(["\n    width: 320px;\n    background: white;\n    padding: 1.5rem;\n    border-radius: 5px;\n    box-shadow: 0px 0px 8px rgba(0,0,0,0.125);\n    h2{\n        margin-top: 0;\n        margin-bottom: 1rem;\n    }\n    p{\n        margin-bottom: 3rem;\n    }\n    .buttons{\n        display: flex;\n        justify-content: flex-end;\n    }\n"]))),_n=Object(v.b)(E)(wn||(wn=Object(x.a)(["\n    height: 2rem;\n    &+&{\n        margin-left: 0.75rem;\n    }\n"]))),Dn=function(e){var n=e.visible,t=e.title,r=e.description,a=e.confirmText,o=void 0===a?"\ud655\uc778":a,c=e.cancelText,i=void 0===c?"\ucde8\uc18c":c,s=e.onConfirm,u=e.onCancel;return n?Object(w.jsx)(Tn,{children:Object(w.jsxs)(Pn,{children:[Object(w.jsx)("h2",{children:t}),Object(w.jsx)("p",{children:r}),Object(w.jsxs)("div",{className:"buttons",children:[Object(w.jsx)(_n,{onClick:u,children:i}),Object(w.jsx)(_n,{cyan:!0,onClick:s,children:o})]})]})}):null},Ln=function(e){var n=e.visible,t=e.onConfirm,r=e.onCancel;return Object(w.jsx)(Dn,{visible:n,title:"\ud3ec\uc2a4\ud130 \uc0ad\uc81c",description:"\ud3ec\uc2a4\ud130\ub97c \uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",confirmText:"\uc0ad\uc81c",onConfirm:t,onCancel:r})},Rn=v.b.div(kn||(kn=Object(x.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  margin-top: -1.5rem;\n"]))),Fn=v.b.button(En||(En=Object(x.a)(["\n  padding: 0.25rem 0.5rem;\n  border-radius: 5px;\n  color: ",";\n  font-weight: bold;\n  border: none;\n  outline: none;\n  font-size: 0.875rem;\n  cursor: pointer;\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n  & + & {\n    margin-left: 0.5rem;\n  }\n"])),y.gray[6],y.gray[1],y.cyan[7]),Nn=function(e){var n=e.onEdit,t=e.onRemove,r=Object(d.useState)(!1),a=Object(A.a)(r,2),o=a[0],c=a[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(Rn,{children:[Object(w.jsx)(Fn,{onClick:n,children:"\uc218\uc815"}),Object(w.jsx)(Fn,{onClick:function(){c(!0)},children:"\uc0ad\uc81c"})]}),Object(w.jsx)(Ln,{visible:o,onConfirm:function(){c(!1),t()},onCancel:function(){c(!1)}})]})},zn=z.a.mark(at),An="write/INITIALIZE",Mn="write/CHANGE_FIELD",Bn=Z("write/WRITE_POST"),Gn=Object(A.a)(Bn,3),Un=Gn[0],Wn=Gn[1],Hn=Gn[2],qn="write/SET_ORIGINAL_POST",Jn=Z("write/POST_UPDATE"),Kn=Object(A.a)(Jn,3),Qn=Kn[0],Yn=Kn[1],Zn=Kn[2],$n=Object(M.a)(An),Vn=Object(M.a)(Mn,(function(e){return{key:e.key,value:e.value}})),Xn=Object(M.a)(Un,(function(e){return{title:e.title,body:e.body,tags:e.tags}})),et=Object(M.a)(qn,(function(e){return e})),nt=Object(M.a)(Qn,(function(e){return{id:e.id,title:e.title,body:e.body,tags:e.tags}})),tt=$(Un,(function(e){var n=e.title,t=e.body,r=e.tags;return W.post("/api/posts",{title:n,body:t,tags:r})})),rt=$(Qn,(function(e){var n=e.id,t=e.title,r=e.body,a=e.tags;return W.patch("/api/posts/".concat(n),{title:t,body:r,tags:a})}));function at(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.d)(Un,tt);case 2:return e.next=4,Object(G.d)(Qn,rt);case 4:case"end":return e.stop()}}),zn)}var ot,ct,it,st,ut,bt,lt,jt,dt={title:"",body:"",tags:[],post:null,postError:null,originalPostId:null},Ot=Object(B.a)((Cn={},Object(F.a)(Cn,An,(function(e){return dt})),Object(F.a)(Cn,Mn,(function(e,n){var t=n.payload,r=t.key,a=t.value;return Object(m.a)(Object(m.a)({},e),{},Object(F.a)({},r,a))})),Object(F.a)(Cn,Un,(function(e){return Object(m.a)(Object(m.a)({},e),{},{post:null,postError:null})})),Object(F.a)(Cn,Wn,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{post:t})})),Object(F.a)(Cn,Hn,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{postError:t})})),Object(F.a)(Cn,qn,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{title:t.title,body:t.body,tags:t.tags,originalPostId:t._id})})),Object(F.a)(Cn,Yn,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{post:t})})),Object(F.a)(Cn,Zn,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{postError:t})})),Cn),dt),pt=Object(f.e)((function(e){var n=e.match,t=e.history,r=n.params.postId;console.log(r);var a=Object(C.b)(),o=Object(C.c)((function(e){var n=e.post,t=e.loading,r=e.user;return{post:n.post,error:n.error,loading:t["post/READ_POST"],user:r.user}})),c=o.post,i=o.error,s=o.loading,u=o.user;Object(d.useEffect)((function(){return a(fn(r)),function(){a(mn())}}),[a,r]);var b=function(){var e=Object(un.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=r,W.delete("/api/posts/".concat(n));case 3:t.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}var n}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),l=(u&&u._id)===(c&&c.user._id);return Object(w.jsx)(sn,{post:c,loading:s,error:i,actionButtons:l&&Object(w.jsx)(Nn,{onEdit:function(){a(et(c)),t.push("/write")},onRemove:b})})})),gt=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(ye,{}),Object(w.jsx)(pt,{})]})},ft=v.b.div(ot||(ot=Object(x.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-image: url(",");\n"])),y.gray[2],Se),mt=v.b.div(ct||(ct=Object(x.a)(["\n  .logo-area {\n    display: block;\n    padding-bottom: 2rem;\n    text-align: center;\n    font-weight: bold;\n    letter-spacing: 2px;\n    font-size:2rem;\n    color: green;\n  }\n  box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);\n  padding: 2rem;\n  width: 360px;\n  background: white;\n  border-radius: 10px;\n  opacity: 0.8;\n"]))),ht=function(e){var n=e.children;return Object(w.jsx)(ft,{children:Object(w.jsxs)(mt,{children:[Object(w.jsx)("div",{className:"logo-area",children:Object(w.jsx)(T.b,{to:"/",children:"Diary With You"})}),n]})})},xt=v.b.div(it||(it=Object(x.a)(["\n  h3 {\n    margin: 0;\n    color: ",";\n    margin-bottom: 1rem;\n  }\n"])),y.gray[9]),vt=v.b.input(st||(st=Object(x.a)(["\n  font-size: 1rem;\n  border: none;\n  border-bottom: 1px solid ",";\n  padding-bottom: 0.5rem;\n  outline: none;\n  width: 100%;\n  &:focus {\n    color: $oc-teal-7;\n    border-bottom: 1px solid ",";\n  }\n  & + & {\n    margin-top: 1rem;\n  }\n"])),y.gray[5],y.gray[7]),yt=v.b.div(ut||(ut=Object(x.a)(["\n  margin-top: 2rem;\n  text-align: right;\n  a {\n    color: ",";\n    text-decoration: underline;\n    &:hover {\n      color: ",";\n    }\n  }\n"])),y.gray[6],y.gray[9]),wt=Object(v.b)(E)(bt||(bt=Object(x.a)(["\n  margin-top: 1rem;\n"]))),kt={login:"\ub85c\uadf8\uc778",register:"\ud68c\uc6d0\uac00\uc785"},Et=v.b.div(lt||(lt=Object(x.a)(["\n  color: red;\n  text-align: center;\n  font-size: 0.875rem;\n  margin-top: 1rem;\n"]))),Ct=function(e){var n=e.type,t=e.form,r=e.onChange,a=e.onSubmit,o=e.error,c=kt[n];return Object(w.jsxs)(xt,{children:[Object(w.jsx)("h3",{children:c}),Object(w.jsxs)("form",{onSubmit:a,children:[Object(w.jsx)(vt,{autoComplete:"username",name:"username",placeholder:"Id",onChange:r,value:t.user}),Object(w.jsx)(vt,{autoComplate:"new-password",name:"password",placeholder:"Password...",type:"password",onChange:r,value:t.password}),"register"===n&&Object(w.jsx)(vt,{autoComplate:"new-password",name:"passwordConfirm",placeholder:"PasswordConfirm...",type:"password",onChange:r,value:t.passwordConfirm}),o&&Object(w.jsx)(Et,{children:o}),Object(w.jsx)(wt,{cyan:!0,fullWidth:!0,children:c})]}),Object(w.jsx)(yt,{children:"login"===n?Object(w.jsx)(T.b,{to:"/register",children:"\ud68c\uc6d0\uac00\uc785"}):Object(w.jsx)(T.b,{to:"/login",children:"\ub85c\uadf8\uc778"})})]})},St=t(59),It=z.a.mark(Kt),Tt="auth/CHANGE_FIELD",Pt="auth/INITIALIZE_FORM",_t=Z("auth/REGISTER"),Dt=Object(A.a)(_t,3),Lt=Dt[0],Rt=Dt[1],Ft=Dt[2],Nt=Z("auth/LOGIN"),zt=Object(A.a)(Nt,3),At=zt[0],Mt=zt[1],Bt=zt[2],Gt=Object(M.a)(Tt,(function(e){return{form:e.form,key:e.key,value:e.value}})),Ut=Object(M.a)(Pt,(function(e){return e})),Wt=Object(M.a)(Lt,(function(e){return{username:e.username,password:e.password}})),Ht=Object(M.a)(At,(function(e){return{username:e.username,password:e.password}})),qt=$(Lt,(function(e){var n=e.username,t=e.password;return W.post("/api/auth/register",{username:n,password:t})})),Jt=$(At,(function(e){var n=e.username,t=e.password;return W.post("/api/auth/login",{username:n,password:t})}));function Kt(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.d)(Lt,qt);case 2:return e.next=4,Object(G.d)(At,Jt);case 4:case"end":return e.stop()}}),It)}var Qt,Yt,Zt,$t,Vt,Xt,er,nr,tr,rr={register:{username:"",password:"",passwordConfirm:""},login:{username:"",password:""},auth:null,authError:null},ar=Object(B.a)((jt={},Object(F.a)(jt,Tt,(function(e,n){var t=n.payload,r=t.form,a=t.key,o=t.value;return Object(St.a)(e,(function(e){e[r][a]=o}))})),Object(F.a)(jt,Pt,(function(e,n){var t,r=n.payload;return Object(m.a)(Object(m.a)({},e),{},(t={},Object(F.a)(t,r,rr[r]),Object(F.a)(t,"authError",null),t))})),Object(F.a)(jt,Rt,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{authError:null,auth:t})})),Object(F.a)(jt,Ft,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{authError:t})})),Object(F.a)(jt,Mt,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{authError:null,auth:t})})),Object(F.a)(jt,Bt,(function(e,n){var t=n.payload;return Object(m.a)(Object(m.a)({},e),{},{authError:t})})),jt),rr),or=Object(f.e)((function(e){var n=e.history,t=Object(d.useState)(null),r=Object(A.a)(t,2),a=r[0],o=r[1],c=Object(C.b)(),i=Object(C.c)((function(e){var n=e.auth,t=e.user;return{form:n.register,auth:n.auth,authError:n.authError,user:t.user}})),s=i.form,u=i.auth,b=i.authError,l=i.user;return Object(d.useEffect)((function(){c(Ut("register"))}),[c]),Object(d.useEffect)((function(){if(b)return 409===b.response.status?void o("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uacc4\uc815\uc785\ub2c8\ub2e4."):void o("\ud68c\uc6d0\uac00\uc785\uc2e4\ud328");u&&(console.log("\ud68c\uc6d0\uac00\uc785 \uc131\uacf5"),console.log(u),c(se()))}),[u,b,c]),Object(d.useEffect)((function(){if(l){console.log("check API \uc131\uacf5"),console.log(l),n.push("/");try{localStorage.setItem("user",JSON.stringify(l))}catch(e){console.log("localStorage is not working")}}}),[n,l]),Object(w.jsx)(Ct,{type:"register",form:s,onChange:function(e){var n=e.target,t=n.value,r=n.name;c(Gt({form:"register",key:r,value:t}))},onSubmit:function(e){e.preventDefault();var n=s.username,t=s.password,r=s.passwordConfirm;if(![n,t,r].includes(""))return t!==r?(o("\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),c(Gt({form:"register",key:"passowrd",value:""})),void c(Gt({form:"register",key:"passwordConfirm",value:""}))):void c(Wt({username:n,password:t}));o("\ube48 \uce78\uc744 \ubaa8\ub450 \uc785\ub825\ud558\uc138\uc694")},error:a})})),cr=function(){return Object(w.jsx)(ht,{children:Object(w.jsx)(or,{})})},ir=Object(f.e)((function(e){var n=e.history,t=Object(d.useState)(null),r=Object(A.a)(t,2),a=r[0],o=r[1],c=Object(C.b)(),i=Object(C.c)((function(e){var n=e.auth,t=e.user;return{form:n.login,auth:n.auth,authError:n.authError,user:t.user}})),s=i.form,u=i.auth,b=i.authError,l=i.user;return Object(d.useEffect)((function(){c(Ut("login"))}),[c]),Object(d.useEffect)((function(){if(b)return console.log("\uc624\ub958\ubc1c\uc0dd"),console.log(b),void o("\ub85c\uadf8\uc778 \uc2e4\ud328");u&&(console.log("\ub85c\uadf8\uc778 \uc131\uacf5"),c(se()))}),[u,b,c]),Object(d.useEffect)((function(){if(l){n.push("/");try{localStorage.setItem("user",JSON.stringify(l))}catch(e){console.log("localStorage is not working")}}}),[n,l]),Object(w.jsx)(Ct,{type:"login",form:s,onChange:function(e){var n=e.target,t=n.value,r=n.name;c(Gt({form:"login",key:r,value:t}))},onSubmit:function(e){e.preventDefault();var n=s.username,t=s.password;c(Ht({username:n,password:t}))},error:a})})),sr=function(){return Object(w.jsx)(ht,{children:Object(w.jsx)(ir,{})})},ur=t(60),br=t.n(ur),lr=(t(107),Object(v.b)(I)(Qt||(Qt=Object(x.a)(["\n  padding-top: 5rem;\n  padding-bottom: 5rem;\n"])))),jr=v.b.input(Yt||(Yt=Object(x.a)(["\n  font-size: 3rem;\n  outline: none;\n  padding-bottom: 0.5rem;\n  border: none;\n  border-bottom: 1px solid ",";\n  margin-bottom: 2rem;\n  width: 100%;\n"])),y.gray[4]),dr=v.b.div(Zt||(Zt=Object(x.a)(["\n  .ql-editor {\n    padding: 0;\n    min-height: 320px;\n    font-size: 1.125rem;\n    line-height: 1.5;\n  }\n  .ql-editor.ql-blank::before {\n    left: 0px;\n  }\n"]))),Or=function(e){var n=e.title,t=e.body,r=e.onChangeField,a=Object(d.useRef)(null),o=Object(d.useRef)(null);Object(d.useEffect)((function(){o.current=new br.a(a.current,{theme:"bubble",placeholder:"\ub0b4\uc6a9\uc744 \uc791\uc131\ud558\uc138\uc624...",modules:{toolbar:[[{header:"1"},{header:"2"}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block","link","image"]]}});var e=o.current;e.on("text-change",(function(n,t,a){"user"===a&&r({key:"body",value:e.root.innerHTML})}))}),[r]);var c=Object(d.useRef)(!1);Object(d.useEffect)((function(){c.current||(c.current=!0,o.current.root.innerHTML=t)}),[t]);return Object(w.jsxs)(lr,{children:[Object(w.jsx)(jr,{placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc2dc\uc624",onChange:function(e){r({key:"title",value:e.target.value})},value:n}),Object(w.jsx)(dr,{children:Object(w.jsx)("div",{ref:a})})]})},pr=t(62),gr=v.b.div($t||($t=Object(x.a)(["\n  width: 100%;\n  border-top: 1px solid ",";\n  padding-top: 2rem;\n\n  h4 {\n    color: ",";\n    margin-top: 0;\n    margin-bottom: 0.5rem;\n  }\n"])),y.gray[2],y.gray[8]),fr=v.b.form(Vt||(Vt=Object(x.a)(["\n  border-radius: 4px;\n  overflow: hidden;\n  display: flex;\n  width: 256px;\n  border: 1px solid ",";\n  input,\n  button {\n    outline: none;\n    border: none;\n    font-size: 1rem;\n  }\n  input {\n    padding: 0.5rem;\n    flex: 1;\n    min-width: 0;\n  }\n  button {\n    cursor: pointer;\n    padding-right: 1rem;\n    padding-left: 1rem;\n    border: none;\n    background: ",";\n    color: white;\n    font-weight: bold;\n    &:hover {\n      background: ",";\n    }\n  }\n"])),y.gray[9],y.gray[8],y.gray[5]),mr=v.b.div(Xt||(Xt=Object(x.a)(["\n  margin-top: 0.5rem;\n  color: ",";\n  cursor: pointer;\n  &:hover {\n    opacity: 0.5;\n  }\n"])),y.cyan[6]),hr=v.b.div(er||(er=Object(x.a)(["\n  display: flex;\n  margin-top: 0.5rem;\n  color: ",";\n"])),y.cyan[5]),xr=O.a.memo((function(e){var n=e.tag,t=e.onRemove;return Object(w.jsxs)(mr,{onClick:function(){return t(n)},children:["#",n]})})),vr=O.a.memo((function(e){var n=e.tags,t=e.onRemove;return Object(w.jsx)(hr,{children:n&&n.map((function(e){return Object(w.jsx)(xr,{tag:e,onRemove:t},e)}))})})),yr=function(e){var n=e.tags,t=e.onChangeTags,r=Object(d.useState)(""),a=Object(A.a)(r,2),o=a[0],c=a[1],i=Object(d.useState)([]),s=Object(A.a)(i,2),u=s[0],b=s[1],l=Object(d.useCallback)((function(e){if(e&&!u.includes(e)){var n=[].concat(Object(pr.a)(u),[e]);b(n),t(n)}}),[u,t]),j=Object(d.useCallback)((function(e){b(u.filter((function(n){return n!==e})))}),[u]),O=Object(d.useCallback)((function(e){c(e.target.value)}),[]),p=Object(d.useCallback)((function(e){e.preventDefault(),l(o.trim()),c("")}),[o,l]);return Object(d.useEffect)((function(){b(n)}),[n]),Object(w.jsxs)(gr,{children:[Object(w.jsx)("h4",{children:"\ud0dc\uadf8"}),Object(w.jsxs)(fr,{onSubmit:p,children:[Object(w.jsx)("input",{placeholder:"\ud0dc\uadf8\ub97c \uc785\ub825\ud558\uc2dc\uc624",value:o,onChange:O}),Object(w.jsx)("button",{type:"submit",children:"\ucd94\uac00"})]}),Object(w.jsx)(vr,{tags:u,onRemove:j})]})},wr=v.b.div(nr||(nr=Object(x.a)(["\n    margin-top: 1rem;\n    margin-bottom: 3rem;\n    button+button{\n        margin-left: 0.5rem;\n    }\n"]))),kr=Object(v.b)(E)(tr||(tr=Object(x.a)(["\n    height: 2.215rem;\n    &+&{\n        margin-left:0.5rem;\n    }\n"]))),Er=function(e){var n=e.onCancel,t=e.onPublish,r=e.isEdit;return Object(w.jsxs)(wr,{children:[Object(w.jsxs)(kr,{cyan:!0,onClick:t,children:["\ud3ec\uc2a4\ud2b8 ",r?"\uc218\uc815":"\ub4f1\ub85d"]}),Object(w.jsx)(kr,{onClick:n,children:"\ucde8\uc18c"})]})},Cr=function(){var e=Object(C.b)(),n=Object(C.c)((function(e){var n=e.write;return{title:n.title,body:n.body}})),t=n.title,r=n.body,a=Object(d.useCallback)((function(n){return e(Vn(n))}),[e]);return Object(d.useEffect)((function(){return function(){e($n())}}),[e]),Object(w.jsx)(Or,{onChangeField:a,title:t,body:r})},Sr=function(){var e=Object(C.b)(),n=Object(C.c)((function(e){return e.write.tags}));return Object(w.jsx)(yr,{onChangeTags:function(n){e(Vn({key:"tags",value:n}))},tags:n})},Ir=Object(f.e)((function(e){var n=e.history,t=Object(C.b)(),r=Object(C.c)((function(e){var n=e.write;return{title:n.title,body:n.body,tags:n.tags,post:n.post,postError:n.postError,originalPostId:n.originalPostId}})),a=r.title,o=r.body,c=r.tags,i=r.post,s=r.postError,u=r.originalPostId;return Object(d.useEffect)((function(){if(i){var e=i._id,t=i.user;n.push("@".concat(t.username,"/").concat(e))}s&&console.log(s)}),[n,i,s]),Object(w.jsx)(Er,{onPublish:function(){t(u?nt({title:a,body:o,tags:c,id:u}):Xn({title:a,body:o,tags:c}))},onCancel:function(){n.goBack()},isEdit:!!u})})),Tr=function(){return Object(w.jsxs)(I,{children:[Object(w.jsx)(Cr,{}),Object(w.jsx)(Sr,{}),Object(w.jsx)(Ir,{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{})]})},Pr=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(f.a,{component:rn,path:["/@:username","/"],exact:!0}),Object(w.jsx)(f.a,{component:sr,path:"/login"}),Object(w.jsx)(f.a,{component:cr,path:"/register"}),Object(w.jsx)(f.a,{component:Tr,path:"/write"}),Object(w.jsx)(f.a,{component:gt,path:"/@:username/:postId"})]})},_r=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,111)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,o=n.getLCP,c=n.getTTFB;t(e),r(e),a(e),o(e),c(e)}))},Dr=t(22),Lr=t(61),Rr=t(63),Fr=z.a.mark(Nr);function Nr(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.a)([Kt(),de(),at(),xn(),We()]);case 2:case"end":return e.stop()}}),Fr)}var zr=Object(Dr.combineReducers)({auth:ar,loading:Y,user:ve,write:Ot,post:In,posts:Ze}),Ar=Object(Rr.a)(),Mr=Object(Dr.createStore)(zr,Object(Lr.composeWithDevTools)(Object(Dr.applyMiddleware)(Ar)));Ar.run(Nr),function(){try{var e=localStorage.getItem("user");if(!e)return;Mr.dispatch(ie(e)),Mr.dispatch(se())}catch(n){console.log("loaclStorage is not working")}}(),g.a.render(Object(w.jsx)(C.a,{store:Mr,children:Object(w.jsx)(T.a,{children:Object(w.jsx)(Pr,{})})}),document.getElementById("root")),_r()},68:function(e,n,t){}},[[108,1,2]]]);
//# sourceMappingURL=main.85dfe983.chunk.js.map